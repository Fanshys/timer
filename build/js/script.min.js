"use strict";function s(t,e,i){var n=1<arguments.length&&void 0!==e?e:0,a=2<arguments.length&&void 0!==i?i:r;document.querySelector(".timer-items").insertAdjacentHTML("beforeend",'<li class="timer-item" data-id="'.concat(a,'">\n            <label class="timer-item__name">\n                <input class="timer-item__title" value="').concat(t,'" readonly="readonly">\n                <button class="timer-item__rename"></button>\n            </label>\n            <div class="timer-item__right">\n                <span class="timer-item__counter" data-id="').concat(a,'">00:00:00</span>\n                <div class="timer-item__buttons">\n                    <button class="button timer-item__button start-button">Start</button>\n                    <button class="button timer-item__button pause-button">Pause</button>\n                    <button class="button timer-item__button reset-button">Reset</button>\n                </div>\n            </div>\n            <div class="timer-item__options">\n                <button class="timer-item__open"></button>\n                <ul class="timer-item__list">\n                    <li class="timer-item__option timer-item__option_delete" title="Удалить"></li>\n                    <li class="timer-item__option timer-item__option_rename" title="Переименовать"></li>\n                </ul>\n            </div>\n        </li>')),m.postMessage({func:"create",time:n,name:t,id:a}),o.push({name:t,time:n,id:a}),r++}var r=0,o=[],m=new Worker("./build/js/worker.js");m.onmessage=function(t){var e=t.data.id,i=o.find(function(t){return t.id===e});document.querySelector(".timer-item__counter[data-id='".concat(e,"']")).innerHTML=t.data.time,document.title=t.data.name+" - "+t.data.time,i.time=t.data.diff,i.name=t.data.name,c()};function a(t){var e=document.querySelector(".timer-item[data-id='".concat(t,"']")),i=document.querySelector(".timer-item[data-id='".concat(t,"'] .timer-item__options"));i.classList.contains("timer-item__options_open")?(i.classList.remove("timer-item__options_open"),i.classList.add("timer-item__options_close"),setTimeout(function(){e.classList.remove("timer-item_open")},200),setTimeout(function(){i.classList.remove("timer-item__options_close")},500)):(i.classList.add("timer-item__options_open"),setTimeout(function(){e.classList.add("timer-item_open")},250))}function n(e){var t=document.querySelector(".timer-item[data-id='".concat(e,"'] .timer-item__title")),i=document.querySelector(".timer-item[data-id='".concat(e,"'] .timer-item__rename"));if("readonly"==t.getAttribute("readonly"))t.removeAttribute("readonly"),t.classList.add("timer-item__title_change"),t.select(),t.focus(),i.classList.add("timer-item__rename_visible");else{t.setAttribute("readonly","readonly"),t.classList.remove("timer-item__title_change"),i.classList.remove("timer-item__rename_visible");var n=t.value;o.find(function(t){return t.id==e}).name=n,m.postMessage({func:"rename",id:e,name:n}),c(),a(e)}}var c=function(){localStorage.setItem("timersArray",JSON.stringify(o))};document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("timersArray")&&JSON.parse(localStorage.getItem("timersArray")).length?function t(e,i){var n=1<arguments.length&&void 0!==i?i:0;if(n<e.length){var a=e[n];r=r<a.id?a.id:r,s(a.name,a.time,a.id),n++,setTimeout(function(){t(e,n)},150)}}(JSON.parse(localStorage.getItem("timersArray"))):s("Секундомер")}),document.querySelector(".timer-create__button").addEventListener("click",function(){var t=document.querySelector(".timer-create__input").value;document.querySelector(".timer-create__input").value="",s(t)}),document.querySelector(".timer-create__input").addEventListener("keyup",function(t){if(13==t.keyCode){var e=this.value;s(e),this.value=""}}),document.querySelector(".timer-items").addEventListener("click",function(t){var e=t.target,i=e.closest(".timer-item").dataset.id;switch(!0){case e.classList.contains("start-button"):!function(t){m.postMessage({func:"start",id:t})}(i);break;case e.classList.contains("pause-button"):!function(t){m.postMessage({func:"pause",id:t})}(i);break;case e.classList.contains("reset-button"):!function(t){m.postMessage({func:"reset",id:t})}(i);break;case e.classList.contains("timer-item__open"):a(i);break;case e.classList.contains("timer-item__option_delete"):!function(e){m.postMessage({func:"delete",id:e});var t=o.find(function(t){return t.id==e});o.splice(o.indexOf(t),1),document.querySelector(".timer-item[data-id='".concat(e,"']")).classList.add("timer-item_delete"),setTimeout(function(){document.querySelector(".timer-item[data-id='".concat(e,"']")).remove()},500),localStorage.setItem("timersArray",JSON.stringify(o))}(i);break;case e.classList.contains("timer-item__option_rename"):case e.classList.contains("timer-item__rename"):n(i)}}),document.querySelector(".timer-items").addEventListener("keyup",function(t){if(13==t.keyCode){var e=t.target,i=e.closest(".timer-item").dataset.id;switch(!0){case e.classList.contains("timer-item__title"):n(i)}}});