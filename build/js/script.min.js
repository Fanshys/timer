"use strict";var o=0,s=[];function e(t,e,n){var i=1<arguments.length&&void 0!==e?e:0,a=2<arguments.length&&void 0!==n?n:o;document.querySelector(".stopwatch__create").insertAdjacentHTML("beforebegin",'<div class="stopwatch-item row"><button class="stopwatch-item__delete"><i class="far fa-trash-alt"></i></button><div class="stopwatch-item__name-block col-12 col-md-6"><label><input class="stopwatch-item__name" value="'+t+'" readonly="readonly" maxlength="15"><button class="stopwatch-item__name-icon"><i class="fas fa-pencil-alt"></i></button></label></div><div class="stopwatch-item__counter-block col-12 col-md-6" name="clockform"><span id="timer-'+a+'" class="stopwatch-item__counter stopwatch">00:00:00</span><div id="'+a+'" class="stopwatch-item__buttons"><button class="stopwatch-item__button start-button">Старт</button><button class="stopwatch-item__button pause-button">Пауза</button><button class="stopwatch-item__button reset-button">Сброс</button></div></div></div>'),r.postMessage({func:"create",time:i,name:t,id:a}),s.push({name:t,time:i,id:a}),o++,document.querySelectorAll(".stopwatch-item:nth-last-of-type(2) .start-button")[0].addEventListener("click",function(){!function(t){r.postMessage({func:"start",id:t})}(this.parentElement.getAttribute("id"))}),document.querySelectorAll(".stopwatch-item:nth-last-of-type(2) .pause-button")[0].addEventListener("click",function(){!function(t){r.postMessage({func:"pause",id:t})}(this.parentElement.getAttribute("id"))}),document.querySelectorAll(".stopwatch-item:nth-last-of-type(2) .reset-button")[0].addEventListener("click",function(){!function(t){r.postMessage({func:"reset",id:t})}(this.parentElement.getAttribute("id"))}),document.querySelectorAll(".stopwatch-item:nth-last-of-type(2) .stopwatch-item__name-icon")[0].addEventListener("click",function(){var e=this.parentElement.parentElement.nextElementSibling.children[1].getAttribute("id");if("readonly"==this.previousSibling.getAttribute("readonly"))this.innerHTML='<i class="fas fa-check"></i>',this.previousSibling.removeAttribute("readonly"),this.previousSibling.setAttribute("style","border-bottom: 2px solid #00b3d6; color: white");else{this.innerHTML='<i class="fas fa-pencil-alt"></i>',this.previousSibling.setAttribute("readonly","readonly"),this.previousSibling.setAttribute("style","border-bottom: none; color: #b4f5fd");var t=this.previousSibling.value;s.find(function(t){return t.id==e}).name=t,r.postMessage({func:"rename",id:e,name:t}),c()}}),document.querySelectorAll(".stopwatch-item:nth-last-of-type(2) .stopwatch-item__name")[0].addEventListener("keyup",function(t){if(13==t.keyCode&&!this.getAttribute("readonly")){var e=this.parentElement.parentElement.nextElementSibling.children[1].getAttribute("id");this.nextElementSibling.innerHTML='<i class="fas fa-pencil-alt"></i>',this.setAttribute("readonly","readonly"),this.setAttribute("style","border-bottom: none; color: #b4f5fd");var n=this.value;s.find(function(t){return t.id==e}).name=n,r.postMessage({func:"rename",id:e,name:n}),c()}}),document.querySelectorAll(".stopwatch-item:nth-last-of-type(2) .stopwatch-item__delete")[0].addEventListener("click",function(){var e=this.parentElement.children[2].children[1].getAttribute("id");r.postMessage({func:"delete",id:e});var t=s.find(function(t){return t.id==e});s.splice(s.indexOf(t),1),this.parentElement.remove(),localStorage.setItem("timersArray",JSON.stringify(s))})}var r=new Worker("./build/js/worker.js");function c(){localStorage.setItem("timersArray",JSON.stringify(s))}r.onmessage=function(t){var e=t.data.id,n=s.find(function(t){return t.id===e});document.querySelector("#timer-"+e).innerHTML=t.data.time,document.title=t.data.name+" - "+t.data.time,n.time=t.data.diff,n.name=t.data.name,c()},document.querySelector(".input__create").addEventListener("keyup",function(t){13==t.keyCode&&(e(this.value),this.value="")}),document.querySelector(".button__create").addEventListener("click",function(){var t=document.querySelector(".input__create").value;document.querySelector(".input__create").value="",e(t)}),document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("timersArray")&&JSON.parse(localStorage.getItem("timersArray")).length?JSON.parse(localStorage.getItem("timersArray")).forEach(function(t){o=o<t.id?t.id:o,e(t.name,t.time,t.id)}):e("Секундомер")});